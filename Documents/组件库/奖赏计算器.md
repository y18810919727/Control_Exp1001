# 奖赏计算器

用于根据当前及以前的$y,u,d,c,y^*$对本次的控制指令进行奖赏。

## 奖赏计算器基类

- 构造函数

```python
class BaseReward:
    def __init__(self, weight_matrix=None):
        self.state_buffer = [] #存储历史片段，双端队列
        self.position = -1
        self.capacity = 100 # 历史片段存储上限
        self.weight_matrix = weight_matrix
```

- 必须重写的方法:

```python
def cal_reward(self,y_star, y, u, c, d, weight):
    raise NotImplementedError
```

## 二范数奖赏计算器

$r = - (y-y^*) \times W \times (y-y^*)^T$

$r$越大说明说明控制效果越好

- 构建方法:

```python
def __init__(self, weight_matrix=None):
```

- 参数详解:

  - weight_matrix: 权重矩阵，需要与$y*$的规模一致

- 举例

  ```python
  from Control_Exp1001.common.rewards.demo_reward import DemoReward
  reward1 = DemoReward(weight_matrix=[1,10])
  reward2 = DemoReward()
  ```

  > 注：此时$y^*$为[0,0]，大小为2