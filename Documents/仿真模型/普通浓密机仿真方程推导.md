# 仿真方程简介
该仿真方程主要参考了文献[1]-矿浆中和沉降分离过程模型软件的研发.pdf 的27-31页。
方程为微分方程，描述了泥层高度的变化率$\frac{\mathrm{d}h(t)}{\mathrm{d}t}$和底流浓度的变化率$\frac{\mathrm{d}c_u(t)}{\mathrm{d}t}$。

### 模型输入参数 


| 序号 | 变量              |          含义          |   量纲   | 论文参考值 |                        补充说明                        |
| :--: | :---------------- | :--------------------: | :------: | :--------: | :----------------------------------------------------: |
|  1   | $f_{i}(t)$        |        进料泵频        |   $Hz$   |     40     |                           扰动量                           |
|  2   | $f_{u}(t)$        |        底流泵频        |   $Hz$   |     85     |                           控制量                           |
|  3   | $f_{f}(t)$        |       絮凝剂泵频       |   $Hz$   |     40     |                           控制量                           |
|  4   | $c _ { i } ( t )$ |   进料单位体积含固量   | $kg/m^3$ |     73     |                           扰动量                           |
|  5   | $h(t)$            |    当前泥层界面高度    |   $m$    |    1.48    | 初始值有公式计算（下给），后续输入值由上一时刻计算得出y |
|  6   | $c_u(t)$          | 当前底流单位体积含固量 | $kg/m^3$ |    680     |      初始值人为设定，后续输入值由上一时刻计算得出y      |

### 工艺参数(人为给定) 
> 注：以下工艺参数相比原论文有诸多更改

| 序号 | 变量          |                        含义                        |     量纲     |             论文参考值(为了单位统一，与原论文有区别)             |                补充说明                 |
| :--: | :------------ | :------------------------------------------------: | :----------: | :--------------------------------: | :-------------------------------------: |
|  1   | $\rho _s$     |                      干砂密度                      |   $kg/m^3$   |                4150                |                   无                    |
|  2   | $\rho _e$     |                    介质表观密度                    |   $kg/m^3$   |                1803                |                   无                    |
|  3   | $\mu _ { e }$ |                 悬浮体系的表观粘度                 | $Pa \cdot s$ |                1                | 原论文给的0.1，导致例子下沉降速度太快 |
|  4   | $d_0$         |            浓密机进料口处的球形颗粒直径            |     $m$      |               0.00008               |                   原论文给的0.0008，阮博士说例子大小为数十$\mu m$级别                    |
|  5   | $p$           |                    平均浓度系数                    |      无      |                0.5                 |                   无                    |
|  6   | $A$           |                   浓密机横截面积                   |    $m^2$     | 300.5 |             原论文浓密机直径50$m$，面积算出来1937.5,还是太大导致例子下沉降速度太快，改小点             |
|  7   | $k_s$         |                   絮凝剂作用系数                   |   $s/m^2$    |               0.157             |                   原论文为0.36，还是太大导致例子下沉降速度太快，改小点                    |
|  8   | $k_i$         |                   压缩层浓度系数                   |     $m^3/s$       |               0.0005*3600               |                   会影响泥层界面高度处的浓度                    |
|  9   | $K_i$         |              进料流量与进料泵频的系数              |      $m^3/r$       |                 50/3600                 |                   无                    |
|  10  | $K_u$         |              底流流量与底流泵频的系数              |      $m^3/r$       |                 2/3600                  |                   无                    |
|  11  | $K_f$         |            絮凝剂流量与絮凝剂泵频的系数            |      $m^3/r$       |                0.75/3600                |                   无                    |
|  12  | $\theta$      | 压缩时间（底流压缩到满足出料要求得液固比所需时间） |     $s$      |                 2300                 |                   个人感觉就是粒子在浓密机的停留时间，原论文85，小到不能接受                    |
|  13  | $g$      | 重力加速度 |     $kg/m^2$      |                 $9.8$                 |                                       |



### 求解过程中间变量 

| 序号 | 中间变量  |               含义               |                             公式                             |   量纲   | 补充说明 |
| :--: | :-------- | :------------------------------: | :----------------------------------------------------------: | :------: | :------: |
|  1   | $q_i(t)$  |             进料流量             |        $q _ { i } ( t ) = K _ { i } f _ { i } ( t )$         | $m^3/s$  |    无    |
|  2   | $q_u(t)$  |             底流流量             |        $q _ { u } ( t ) = K _ { u } f _ { u } ( t )$         | $m^3/s$  |    无    |
|  3   | $q_f(t)$  |           絮凝剂添加量           |        $q _ { f } ( t ) = K _ { f } f _ { f } ( t )$         | $m^3/s$  |    无    |
|  4   | $d(t)$    |       絮凝作用后的颗粒直径       |      $d ( t ) = k _ { s } q _ { f } ( t ) + d _ { 0 }$       |   $m$    |    无    |
|  5   | $u_t(t)$  |        颗粒的干涉沉降速度        | $u _ { t} ( t ) = \frac { d ^ { 2 } ( t ) \left( \rho _ { s } - \rho _ { e } \right) g } { 18 \mu _ { e } }$ |  $m/s$   |    无    |
|  6   | $u_r(t)$  |      底流导致的颗粒下沉速度      |     $u _ { r } ( t ) = \frac { q _ { u } ( t ) } { A  }$     |  $m/s$   |    无    |
|  7   | $c_l(t)$  |     泥层高度处单位体积含固量     | $c _ { l } ( t ) = k _ { i } q _ { i } ( t ) c _ { i } ( t )$ | $kg/m^3$ |  无   |
|  8   | $c_a(t)$  | 泥层界面高度内平均单位体积含固量 | $c _ { a } ( t ) = p \left[ c _ { l } ( t ) + c _ { u } ( t ) \right]$ | $kg/m^3$ |  文献4   |
|  9   | $r ( t )$ | 泥层内液固质量比 |         $r(t)=\frac{\rho_{l}}{\rho_{s}}*\frac{\rho_{s}-c_a(t)}{c_a(t)-\rho_{l}}$         | 无 |    附录1   |
|  10   | $W ( t )$ | 单位时间内进入浓密机内的固体质量 |         $W ( t ) = c _ { i } ( t ) q _ { i } ( t )$          | $kg/s$ |    无    |
### 模型假设 

1. 进料都是球形颗粒 
2. 絮凝剂在浓密机的静态混合器中作用完全； 
3. 流体的扩散以固液混合物形式进行； 
4. 忽略颗粒间的作用、浓密机中把机中轴的影响、趙齿的运动和空间尺度。 

### 浓密机仿真模型
由文献[3]-146页中给出的柯尔森公式，在稳态条件下，泥层高度与泥层界面处单位时间进入的固体质量之间存在如下关系：

 $h ( t ) = \frac { W ( t ) \theta } { A \rho _ { s } } + \frac { W ( t ) \theta } { A\rho_l }  r(t) \quad (1)$
 > 如何理解这个式子：由于文献[3]无法下载，不确定原文是怎么引出这个公式的。我的理解是这里所描述的等式关系代表着如果以恒定速度$W(t)$加入固体干砂，泥层高度会收敛到一稳态值。料加得越快，泥层可能堆起的高度就越大。

式中$r(t)$ 为泥层界面内液体与固体的比，
$r(t)=\frac{\rho_{l}}{\rho_{s}}(\frac{\rho_{s}}{c_a(t)}-1)$ 

> 证明推导见附录1。     

假设某一个时刻$W(t)$为定值，对式(1)两侧求对时间的导数，构建$h(t)$和$c_a(t)$之间的关系:

 $\frac{\mathrm{d}h ( t )}{\mathrm{d}t} = \frac { W ( t ) \theta } { A\rho_l }  *\frac{\rho_l}{\rho_s}\frac{-\rho_s}{c_a(t)^2}\frac{\mathrm{d}c_a(t)}{\mathrm{d}t} \quad (2)$


根据固体守恒定律，泥层平均单位固体质量变化量=泥层高度处单位固体量 \* 颗粒下降高度 \* 浓密机横截面积 - 底流单位固体变化量。

 $\frac { \mathrm { d } \left[ c _ { a } ( t ) A  h ( t ) \right] } { \mathrm { d } t } = c _ { l } ( t ) \left[ u _ { t } ( t ) + u _ { r } ( t ) \right] A  - c _ { u } ( t ) u _ { r } ( t ) A$ (2)

等式两边同时约去浓密机横截面积A，得：

 $\frac { \mathrm { d } \left[ c _ { a } ( t ) h  ( t ) \right] } { \mathrm { d } t } = c _ { l } ( t ) \left[ u _ { t } ( t ) + u _ { r } ( t ) \right] - c _ { u } ( t ) u _ { r } ( t )$ (3)

又知求导法则：

 $\frac { \mathrm { d } \left[ c _ { a } ( t ) h  ( t ) \right] } { \mathrm { d } t } = c _ { a } ( t ) \frac { \mathrm { d } h ( t ) } { \mathrm { d } t } + h  ( t ) \frac { \mathrm { d } c _ { a } ( t ) } { \mathrm { d } t } = c _ { a } ( t ) \frac { \mathrm { d } h ( t ) } { \mathrm { d } t } + h  ( t ) p\frac { \mathrm { d } c _ { u } ( t ) } { \mathrm { d } t }\quad (4)$ 

 联立(1)和(4)：
$$
\left\{
\begin{array}
&\frac{\mathrm{d}h(t)}{\mathrm{d}t}= \frac { W ( t ) \theta } { A }  *\frac{\rho_l}{\rho_s}\frac{\rho_l-\rho_s}{(c_a(t)-\rho_l)^2}\frac{\mathrm{d}c_a(t)}{\mathrm{d}t}\\
c _ { a } ( t ) \frac { \mathrm { d } h ( t ) } { \mathrm { d } t } + h  ( t ) \frac { \mathrm { d } c _ { a } ( t ) } { \mathrm { d } t }=c _ { l } ( t ) \left[ u _ { t } ( t ) + u _ { r } ( t ) \right] - c _ { u } ( t ) u _ { r } ( t )
\end{array}
\right.
$$
可以得到
$$
\left\{
\begin{array}
&\frac{\mathrm{d}h(t)}{\mathrm{d}t}= \frac{dc}{b+ad}\\
\frac{\mathrm{d}c_a(t)}{\mathrm{d}t}= \frac{c}{b+ad}\\
\frac{\mathrm{d}c_u(t)}{dt}= \frac{c}{p(b+ad)}
\end{array}
\right.
$$
其中
$a = c_a(t)$
$b = h(t)$
$c = c_l(t)[u_t(t) + u_r(t)] - c_u(t)u_r(t)$
$d=\frac { W ( t ) \theta } { A\rho_l }  *\frac{\rho_l}{\rho_s}\frac{\rho_l-\rho_s}{(c_a(t)-\rho_l)^2}$


## 参考依据 

1. 王猛. 矿浆中和沉降分离过程模型软件的研发[D]. 沈阳：东北大学，2011. 
2. Borut Zupancic. Extension software for real-time control system design and  implementation with MATLAB-SIMULINK [J], Simulation Practice and Theory,  1998,6 :  703 - 719. 
3. 唐谟堂，唐刿.湿法冶金设备[M]，长沙：中南大学出版社，2002，137-149.
4. Youngchul Kim, Wesley O Pipes. Factors influencing suspended solids concentrations in activated sludge settling tanks [J]. Journal of Hazardous Materials, 1999(B69): 95-109.
5. Kim B H, Klima M S. Development and Application of a Dynamic Model for Hindered-Settling Column Separations [J]. Minerals engineering, 2004, 17(3): 403-410.
6. 李海波. 赤铁矿混合选别全流程智能控制系统的研究[D]. 沈阳：东北大学，2014. 
7. 武成瑞, 贾瑶, 王琳岩. 混合选别过程半实物仿真系统[J]. 工程科学学报, 2017, 39(9):1412-1420.
8. 王琳岩, 李健, 贾瑶, et al. 混合选别浓密过程双速率智能切换控制[J]. 自动化学报, 2018, 44(2).
9. 混合选别浓密机底流矿浆浓度和流量区间智能切换控制方法[J]. 自动化学报, 2014, 40(9):1967-1975.
10. 马鲁铭，高延耀. 湿法冶金设备[M]. 长沙：中南大学出版社，2001，132-154.
11. 姜志新，谢志铨. 湿法冶金分离工程[M]. 北京：原子能出版社，1993，121-158
12. Wang L , Jia Y , Chai T , et al. Dual Rate Adaptive Control for Mixed Separation Thickening Process Using Compensation Signal Based Approach[J]. IEEE Transactions on Industrial Electronics, 2017, PP(99):1-1.

## 附录

#### 1. 证明液固比 $r(t)=\frac{\rho_{l}}{\rho_{s}}(\frac{\rho_{s}}{c_a(t)}-1)$
假设$t$时刻泥层内干砂所占体积为$v_s$，则干砂所占质量为$m_s=v_s\rho_s$。水所占体积为$v_l$，则水所占质量为$m_l=v_l\rho_l$。
定义$r(t)$为泥层界面内液固质量比。
即:
$$
r(t)=\frac{v_l*\rho_l}{v_s*\rho_s}\quad \Rightarrow\quad v_l=\frac{\rho_sr}{\rho_l}v_s,m_l=m_sr
$$
对于泥层界面内平均$c_a(t)$满足（此处忽略混合物的体积缩减效应）:
$$
c_a(t)=\frac{m_s}{v_l+v_s}=\frac{m_s}{\frac{\rho_sr}{\rho_l}v_s+v_s}\\
=\frac{\rho_s}{\frac{\rho_sr}{\rho_l}+1}
$$
进一步变形可得
$$r(t)=\frac{\rho_{l}}{\rho_{s}}\frac{\rho_{s}-c_a(t)}{c_a(t)}=\frac{\rho_{l}}{\rho_{s}}(\frac{\rho_{s}}{c_a(t)}-1)$$

> 文献[1]给出的液固比表达式为$r(t)=\rho_L\left[\frac{\rho_s}{c_a(t)}-1\right]$，与上述推导结果不同。我认为是文献[1]给错了。从公式(1)的形式来看，$r(t)$应该是一个没有单位的系数。





